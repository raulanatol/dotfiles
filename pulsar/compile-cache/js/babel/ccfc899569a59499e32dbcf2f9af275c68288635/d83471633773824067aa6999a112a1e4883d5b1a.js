"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _atom = require("atom");
/** @babel */

class CollapsibleSectionPanel {
  notHiddenCardsLength(sectionElement) {
    return sectionElement.querySelectorAll('.package-card:not(.hidden)').length;
  }
  updateSectionCount(headerElement, countElement, packageCount, totalCount) {
    if (totalCount != null) {
      countElement.textContent = `${packageCount}/${totalCount}`;
    } else {
      countElement.textContent = packageCount;
    }
    if (packageCount > 0) {
      headerElement.classList.add('has-items');
    }
  }
  updateSectionCounts() {
    this.resetSectionHasItems();
    const filterText = this.refs.filterEditor.getText();
    if (filterText === '') {
      this.updateUnfilteredSectionCounts();
    } else {
      this.updateFilteredSectionCounts();
    }
  }
  handleEvents() {
    const handler = e => {
      const target = e.target.closest('.sub-section .has-items');
      if (target) {
        target.parentNode.classList.toggle('collapsed');
      }
    };
    this.element.addEventListener('click', handler);
    return new _atom.Disposable(() => this.element.removeEventListener('click', handler));
  }
  resetCollapsibleSections(headerSections) {
    for (const headerSection of headerSections) {
      this.resetCollapsibleSection(headerSection);
    }
  }
  resetCollapsibleSection(headerSection) {
    headerSection.classList.remove('has-items');
  }
}
exports.default = CollapsibleSectionPanel;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb2xsYXBzaWJsZVNlY3Rpb25QYW5lbCIsIm5vdEhpZGRlbkNhcmRzTGVuZ3RoIiwic2VjdGlvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwidXBkYXRlU2VjdGlvbkNvdW50IiwiaGVhZGVyRWxlbWVudCIsImNvdW50RWxlbWVudCIsInBhY2thZ2VDb3VudCIsInRvdGFsQ291bnQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsImFkZCIsInVwZGF0ZVNlY3Rpb25Db3VudHMiLCJyZXNldFNlY3Rpb25IYXNJdGVtcyIsImZpbHRlclRleHQiLCJyZWZzIiwiZmlsdGVyRWRpdG9yIiwiZ2V0VGV4dCIsInVwZGF0ZVVuZmlsdGVyZWRTZWN0aW9uQ291bnRzIiwidXBkYXRlRmlsdGVyZWRTZWN0aW9uQ291bnRzIiwiaGFuZGxlRXZlbnRzIiwiaGFuZGxlciIsImUiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicGFyZW50Tm9kZSIsInRvZ2dsZSIsImVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiRGlzcG9zYWJsZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZXNldENvbGxhcHNpYmxlU2VjdGlvbnMiLCJoZWFkZXJTZWN0aW9ucyIsImhlYWRlclNlY3Rpb24iLCJyZXNldENvbGxhcHNpYmxlU2VjdGlvbiIsInJlbW92ZSJdLCJzb3VyY2VzIjpbImNvbGxhcHNpYmxlLXNlY3Rpb24tcGFuZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqIEBiYWJlbCAqL1xuXG5pbXBvcnQge0Rpc3Bvc2FibGV9IGZyb20gJ2F0b20nXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbGxhcHNpYmxlU2VjdGlvblBhbmVsIHtcbiAgbm90SGlkZGVuQ2FyZHNMZW5ndGggKHNlY3Rpb25FbGVtZW50KSB7XG4gICAgcmV0dXJuIHNlY3Rpb25FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWNrYWdlLWNhcmQ6bm90KC5oaWRkZW4pJykubGVuZ3RoXG4gIH1cblxuICB1cGRhdGVTZWN0aW9uQ291bnQgKGhlYWRlckVsZW1lbnQsIGNvdW50RWxlbWVudCwgcGFja2FnZUNvdW50LCB0b3RhbENvdW50KSB7XG4gICAgaWYgKHRvdGFsQ291bnQgIT0gbnVsbCkge1xuICAgICAgY291bnRFbGVtZW50LnRleHRDb250ZW50ID0gYCR7cGFja2FnZUNvdW50fS8ke3RvdGFsQ291bnR9YFxuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSBwYWNrYWdlQ291bnRcbiAgICB9XG5cbiAgICBpZiAocGFja2FnZUNvdW50ID4gMCkge1xuICAgICAgaGVhZGVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdoYXMtaXRlbXMnKVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVNlY3Rpb25Db3VudHMgKCkge1xuICAgIHRoaXMucmVzZXRTZWN0aW9uSGFzSXRlbXMoKVxuXG4gICAgY29uc3QgZmlsdGVyVGV4dCA9IHRoaXMucmVmcy5maWx0ZXJFZGl0b3IuZ2V0VGV4dCgpXG4gICAgaWYgKGZpbHRlclRleHQgPT09ICcnKSB7XG4gICAgICB0aGlzLnVwZGF0ZVVuZmlsdGVyZWRTZWN0aW9uQ291bnRzKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cGRhdGVGaWx0ZXJlZFNlY3Rpb25Db3VudHMoKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUV2ZW50cyAoKSB7XG4gICAgY29uc3QgaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuc3ViLXNlY3Rpb24gLmhhcy1pdGVtcycpXG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC50b2dnbGUoJ2NvbGxhcHNlZCcpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpXG4gICAgcmV0dXJuIG5ldyBEaXNwb3NhYmxlKCgpID0+IHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpKVxuICB9XG5cbiAgcmVzZXRDb2xsYXBzaWJsZVNlY3Rpb25zIChoZWFkZXJTZWN0aW9ucykge1xuICAgIGZvciAoY29uc3QgaGVhZGVyU2VjdGlvbiBvZiBoZWFkZXJTZWN0aW9ucykge1xuICAgICAgdGhpcy5yZXNldENvbGxhcHNpYmxlU2VjdGlvbihoZWFkZXJTZWN0aW9uKVxuICAgIH1cbiAgfVxuXG4gIHJlc2V0Q29sbGFwc2libGVTZWN0aW9uIChoZWFkZXJTZWN0aW9uKSB7XG4gICAgaGVhZGVyU2VjdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtaXRlbXMnKVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUVBO0FBRkE7O0FBSWUsTUFBTUEsdUJBQXVCLENBQUM7RUFDM0NDLG9CQUFvQixDQUFFQyxjQUFjLEVBQUU7SUFDcEMsT0FBT0EsY0FBYyxDQUFDQyxnQkFBZ0IsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDQyxNQUFNO0VBQzdFO0VBRUFDLGtCQUFrQixDQUFFQyxhQUFhLEVBQUVDLFlBQVksRUFBRUMsWUFBWSxFQUFFQyxVQUFVLEVBQUU7SUFDekUsSUFBSUEsVUFBVSxJQUFJLElBQUksRUFBRTtNQUN0QkYsWUFBWSxDQUFDRyxXQUFXLEdBQUksR0FBRUYsWUFBYSxJQUFHQyxVQUFXLEVBQUM7SUFDNUQsQ0FBQyxNQUFNO01BQ0xGLFlBQVksQ0FBQ0csV0FBVyxHQUFHRixZQUFZO0lBQ3pDO0lBRUEsSUFBSUEsWUFBWSxHQUFHLENBQUMsRUFBRTtNQUNwQkYsYUFBYSxDQUFDSyxTQUFTLENBQUNDLEdBQUcsQ0FBQyxXQUFXLENBQUM7SUFDMUM7RUFDRjtFQUVBQyxtQkFBbUIsR0FBSTtJQUNyQixJQUFJLENBQUNDLG9CQUFvQixFQUFFO0lBRTNCLE1BQU1DLFVBQVUsR0FBRyxJQUFJLENBQUNDLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxPQUFPLEVBQUU7SUFDbkQsSUFBSUgsVUFBVSxLQUFLLEVBQUUsRUFBRTtNQUNyQixJQUFJLENBQUNJLDZCQUE2QixFQUFFO0lBQ3RDLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0MsMkJBQTJCLEVBQUU7SUFDcEM7RUFDRjtFQUVBQyxZQUFZLEdBQUk7SUFDZCxNQUFNQyxPQUFPLEdBQUlDLENBQUMsSUFBSztNQUNyQixNQUFNQyxNQUFNLEdBQUdELENBQUMsQ0FBQ0MsTUFBTSxDQUFDQyxPQUFPLENBQUMseUJBQXlCLENBQUM7TUFDMUQsSUFBSUQsTUFBTSxFQUFFO1FBQ1ZBLE1BQU0sQ0FBQ0UsVUFBVSxDQUFDZixTQUFTLENBQUNnQixNQUFNLENBQUMsV0FBVyxDQUFDO01BQ2pEO0lBQ0YsQ0FBQztJQUNELElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUVQLE9BQU8sQ0FBQztJQUMvQyxPQUFPLElBQUlRLGdCQUFVLENBQUMsTUFBTSxJQUFJLENBQUNGLE9BQU8sQ0FBQ0csbUJBQW1CLENBQUMsT0FBTyxFQUFFVCxPQUFPLENBQUMsQ0FBQztFQUNqRjtFQUVBVSx3QkFBd0IsQ0FBRUMsY0FBYyxFQUFFO0lBQ3hDLEtBQUssTUFBTUMsYUFBYSxJQUFJRCxjQUFjLEVBQUU7TUFDMUMsSUFBSSxDQUFDRSx1QkFBdUIsQ0FBQ0QsYUFBYSxDQUFDO0lBQzdDO0VBQ0Y7RUFFQUMsdUJBQXVCLENBQUVELGFBQWEsRUFBRTtJQUN0Q0EsYUFBYSxDQUFDdkIsU0FBUyxDQUFDeUIsTUFBTSxDQUFDLFdBQVcsQ0FBQztFQUM3QztBQUNGO0FBQUM7QUFBQSJ9