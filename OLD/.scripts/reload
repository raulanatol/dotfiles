#!/usr/bin/env bash

source "$DOTFILES_PATH/shell/sout"
source "$DOTFILES_PATH/shell/os"
source "$DOTFILES_PATH/.scripts/utils"

sout::info " ‚ôªÔ∏èÔ∏è  Updating dotfiles"
cd "$DOTFILES_PATH" || exit
git checkout main
git pull

if os::is_macos; then
  sout::info "Installing MacOS üçé custom packages"
  utils::install_macos
fi

echo 'üçª Updating Brew Cask apps'
OUTDATED_CASKS=$(brew cask outdated)

if [ -n "$OUTDATED_CASKS" ]; then
  echo "$OUTDATED_CASKS" | grep -v real-vnc | xargs -n1 brew cask install --force
  echo '‚úÖ Casks updated'
else
  echo '‚úÖ Casks already up-to-date'
fi

source "$HOME"/.zshrc
